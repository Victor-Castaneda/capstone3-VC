<!-- public/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../global.css">
    <link rel="stylesheet" href="./posts.css">
    <!-- icon -->
    <link rel="icon" href="/images/sprial.png">
    <title>/POSTS</title>
    <!--<script src="auth.js"></script>
    <script>
        if (isLoggedIn() === false) window.location.replace("/");
    </script>-->
</head>
<body>
<audio loop="true" id="audio">
    <source src="unmilion.mp3" type="audio/mpeg">
</audio>
    <header>
        <h1>POSTS PAGE</h1>
    </header>
    <main>
        <div class="container">
        <div id="leftdiv"> Lorem ipsum dolor sit amet consectetur adipisicing elit. Similique recusandae totam hic consectetur illo illum rerum esse delectus, suscipit non, iste voluptate optio ab nostrum iusto veniam temporibus enim cumque? </div>
        <div id="bigdiv"> Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolorem consequatur facere officiis debitis quis laborum voluptate voluptatibus qui in! Sequi architecto accusamus error amet fuga. Sunt minima consequatur et nobis? </div>
        <div id="rightdiv"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Doloremque a ratione velit temporibus minima, laborum error quos unde accusantium dolores natus maiores debitis alias necessitatibus, deleniti harum consectetur. Dignissimos, veniam. </div>
    </div>
        <button id="login-button" class="btn btn-primary">Log in with Spotify</button>
        <div id="tracks" class="mt-3"></div>
    </main>
    <footer></footer>
    <script src="posts.js"></script>
    <script> document.addEventListener('DOMContentLoaded', () => {
        const accessToken = sessionStorage.getItem('spotifyAccessToken');
        if (accessToken) {
            fetch('https://api.spotify.com/v1/me/tracks', {
                headers: {
                    'Authorization': 'Bearer ' + accessToken
                }
            })
            .then(response => response.json())
            .then(data => {
                const tracksDiv = document.getElementById('tracks');
                data.items.forEach((item, idx) => {
                    const track = item.track;
                    const trackElement = document.createElement('div');
                    trackElement.textContent = `${idx + 1}: ${track.artists[0].name} â€“ ${track.name}`;
                    tracksDiv.appendChild(trackElement);
                });
            })
            .catch(error => console.error('Error fetching saved tracks:', error));
        } else {
            console.error('Access token not found in session storage');
        }
    });</script>
</body>
</html>
